/*!CK:3828501420!*//*1452812911,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pIrOL"]); }

__d('VideoPlayerHTML5Subtitles',['BlobFactory','DOM','EventListener','SubRipText','XHRRequest','emptyFunction','getCrossOriginTransport'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=b.URL||b.webkitURL;function p(q){'use strict';this.$VideoPlayerHTML5Subtitles1={};this.$VideoPlayerHTML5Subtitles2=q;this.$VideoPlayerHTML5Subtitles3=m;}p.prototype.$VideoPlayerHTML5Subtitles4=function(q){'use strict';var r=new k(q),s=h.getBlob([r.renderVTT()],{type:'text/vtt'});return o.createObjectURL(s);};p.prototype.loadSubtitles=function(q){'use strict';if(q in this.$VideoPlayerHTML5Subtitles1)return this.$VideoPlayerHTML5Subtitles5(this.$VideoPlayerHTML5Subtitles1[q]);if(!o||!h.isSupported())return;new l(q).setTransportBuilder(n).setMethod('GET').setResponseHandler((function(r){this.$VideoPlayerHTML5Subtitles1[q]=this.$VideoPlayerHTML5Subtitles4(r);this.$VideoPlayerHTML5Subtitles5(this.$VideoPlayerHTML5Subtitles1[q]);}).bind(this)).send();};p.prototype.$VideoPlayerHTML5Subtitles5=function(q){'use strict';var r=i.create('track',{kind:'captions',src:q});j.listen(r,'load',(function(){this.$VideoPlayerHTML5Subtitles3();}).bind(this));i.appendContent(this.$VideoPlayerHTML5Subtitles2,r);this.hideSubtitles();};p.prototype.removeSubtitles=function(){'use strict';i.setContent(this.$VideoPlayerHTML5Subtitles2,null);};p.prototype.showSubtitles=function(){'use strict';Array.prototype.forEach.call(this.$VideoPlayerHTML5Subtitles2.textTracks,function(q){return q.mode='showing';});};p.prototype.hideSubtitles=function(){'use strict';Array.prototype.forEach.call(this.$VideoPlayerHTML5Subtitles2.textTracks,function(q){return q.mode='hidden';});};p.prototype.shiftSubtitles=function(q,r){'use strict';if(this.$VideoPlayerHTML5Subtitles2.textTracks[0].cues){this.hideSubtitles();if(q==1){Array.prototype.forEach.call(this.$VideoPlayerHTML5Subtitles2.textTracks[0].cues,function(s){return s.line='auto';});}else Array.prototype.forEach.call(this.$VideoPlayerHTML5Subtitles2.textTracks[0].cues,function(s){return s.line=q-s.text.split(/\r\n|\r|\n/).length;});if(r)this.showSubtitles();}};p.prototype.setOnSubtitlesReady=function(q){'use strict';this.$VideoPlayerHTML5Subtitles3=q;};f.exports=p;},null);